<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Why binary debloating Most users don’t access to the source code. Users may use the same software in dramatically different ways, the unnecessary features also vary from users to users. Therefore, the">
<meta property="og:type" content="article">
<meta property="og:title" content="RAZOR: A Framework for Post-deployment Software Debloating">
<meta property="og:url" content="http://yoursite.com/2020/09/16/RAZOR-A-Framework-for-Post-deployment-Software-Debloating/index.html">
<meta property="og:site_name" content="LCH&#39;s Blog">
<meta property="og:description" content="Why binary debloating Most users don’t access to the source code. Users may use the same software in dramatically different ways, the unnecessary features also vary from users to users. Therefore, the">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-09-16T12:49:27.000Z">
<meta property="article:modified_time" content="2020-09-17T09:26:42.127Z">
<meta property="article:author" content="LCH">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2020/09/16/RAZOR-A-Framework-for-Post-deployment-Software-Debloating/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>RAZOR: A Framework for Post-deployment Software Debloating | LCH's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">LCH's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/16/RAZOR-A-Framework-for-Post-deployment-Software-Debloating/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="LCH">
      <meta itemprop="description" content="paper review...">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LCH's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          RAZOR: A Framework for Post-deployment Software Debloating
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-09-16 20:49:27" itemprop="dateCreated datePublished" datetime="2020-09-16T20:49:27+08:00">2020-09-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-09-17 17:26:42" itemprop="dateModified" datetime="2020-09-17T17:26:42+08:00">2020-09-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/software-debloating/" itemprop="url" rel="index"><span itemprop="name">software debloating</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/software-debloating/binary-debloating/" itemprop="url" rel="index"><span itemprop="name">binary debloating</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Why-binary-debloating"><a href="#Why-binary-debloating" class="headerlink" title="Why binary debloating"></a>Why binary debloating</h1><ul>
<li>Most users don’t access to the source code.</li>
<li>Users may use the same software in dramatically different ways, the unnecessary features also vary from users to users. Therefore, the debloating process should take place after software deployment and should be tailored for each individual user.</li>
<li>Different from dead code removal because some unused functionalities will also be removed.</li>
</ul>
<h1 id="How-to-debloat-binaries-and-challenges"><a href="#How-to-debloat-binaries-and-challenges" class="headerlink" title="How to debloat binaries and challenges:"></a>How to debloat binaries and challenges:</h1><ul>
<li>users provide a set of sample inputs to demonstrate how they will use the software.</li>
<li>modify the software binary to remove the unnecessary features while keeping the needed ones.</li>
<li>it is challenging for end-users (even developers) to provide an input corpus that exercises all necessary code that implements a feature.  Therefore, it’s important to identify the code that is necessary to required functionalities but is not executed when processing the sample inputs, which is called related=code and meanwhile include minimal functionally unrelated code.</li>
</ul>
<h1 id="System-Design"><a href="#System-Design" class="headerlink" title="System Design"></a>System Design</h1><ul>
<li>Tracer: monitors the program execution with the given sample inputs to record (1) executed instructions, including their memory addresses and raw bytes; (2) the taken or non-taken of conditional branches; (3) concrete targets of indirect jumps and calls. With these collected execution traces, RAZOR disassembles the bloated binary and constructs the partial control-ﬂow graph (CFG).</li>
<li>PathFinder: utilizes heuristics to infer more <strong>related-code</strong> from the executed ones and expand CFG.<ul>
<li>If the non-taken target is already in the CFG, PathFinder permits the jump from branch instruction to that non-taken target. </li>
<li>If a new path does not include any call instructions, PathFinder includes all its instructions to the CFG.</li>
<li>If a new path has call instructions that invoke functions within the same binary or external functions that have been executed, PathFinder include all its instructions.</li>
<li>If a new path has call instructions that invoke external functions that have not been executed but have similar functionalities to one executed function (they manually check and group libraries’ descriptions to correlate library functions), they add all instructions in that path.</li>
</ul>
</li>
<li>Generator: generates a new binary based on the output CFG of Tracer and PathFinder.<ul>
<li>disassembles the original binary following the expanded CFG -&gt;  modifies the pseudo-assembly to create a valid assembly file -&gt;  compiles the assembly fle into an object fle -&gt; copies the machine code from the object fle into a new code section of the original binary -&gt; modifes the new code section to fIx all references to the original code and data -&gt; sets the original code section non-executable to reduce the code size.</li>
<li>modifies the pseudo-assembly to create a valid assembly file: 1) Basic Block Symbolization, create the label L_addr for the basic block at address addr, then scan all direct jump and call instructions and replace their concrete target addresses with corresponding labels. 2) <strong>indirect call</strong>, The first method is to locate constants from the original binary that are used as code addresses and replace them with the corresponding new addresses, the second method is to perform the address translation before each indirect call. This paper takes the second approach. For local targets, they define a translation table (which is equivalent to a map) for each indirect call instruction; for global targets, they use a global translation function to find the correct module and then look up its translation table to get the correct new address to invoke. 3) if a debloated binary reach removed code or disabled branches, they redirect such attempt to a fault handler that exits the execution and dumps the call stack.</li>
</ul>
</li>
</ul>
<h1 id="Results"><a href="#Results" class="headerlink" title="Results:"></a>Results:</h1><ul>
<li>Code reduction: On average, RAZOR achieves 68.19% code reduction for SPEC benchmarks and 78.8% code reduction for CHISEL benchmarks.</li>
<li>Functionality: RAZOR binaries produce the same results as those from the original binaries for all test cases of all programs, showing the robustness of the debloated binaries. CHISEL, a debloating tool they use to compare with RAZOR, only passes three.</li>
<li>Effectiveness of Path Finding: PathFinder effectively identifies related-code that completes the functionalities triggered by training inputs. They mention this aspect because finding new paths is their main contribution.</li>
<li>Security: RAZOR removes four CVEs from the original binaries and does not introduce any new bugs. RAZOR reduces 61.9% ROP gadgets, while CHISEL reduces 85.1% ROP gadgets. RAZOR prevents attackers from corrupting function pointers because function pointers are replaced with if_else.</li>
<li>Performance: On average, RAZOR introduces 1.70% overhead to debloated programs, indicating its efficiency for real-world deployment. </li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/09/13/Everything-Old-is-New-Again-Binary-Security-of-WebAssembly/" rel="prev" title="Everything Old is New Again: Binary Security of WebAssembly">
      <i class="fa fa-chevron-left"></i> Everything Old is New Again: Binary Security of WebAssembly
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Why-binary-debloating"><span class="nav-number">1.</span> <span class="nav-text">Why binary debloating</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#How-to-debloat-binaries-and-challenges"><span class="nav-number">2.</span> <span class="nav-text">How to debloat binaries and challenges:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#System-Design"><span class="nav-number">3.</span> <span class="nav-text">System Design</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Results"><span class="nav-number">4.</span> <span class="nav-text">Results:</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">LCH</p>
  <div class="site-description" itemprop="description">paper review...</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LCH</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
